"use strict";(self.webpackChunktraders=self.webpackChunktraders||[]).push([[588],{588:(E,p,r)=>{r.r(p),r.d(p,{BillPrintModule:()=>$});var s=r(36895),g=r(64575),m=r(15439),t=r(94650),A=r(32566),x=r(21102),h=r(90433),C=r(47044),Z=r(5259),f=r(44688);function y(i,l){if(1&i){const n=t.EpF();t.TgZ(0,"a",6),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.print())}),t._UZ(1,"span",7),t.qZA()}}function b(i,l){1&i&&(t.TgZ(0,"h3",8),t._uU(1,"No Bills"),t.qZA())}function T(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2,"\xa0\xa0\xa0"),t.TgZ(3,"strong",22),t._uU(4),t.qZA(),t._uU(5,"\xa0"),t.TgZ(6,"strong",22),t._uU(7),t.qZA()(),t.TgZ(8,"td",21),t._uU(9),t.qZA(),t.TgZ(10,"td",22),t._uU(11),t.qZA(),t.TgZ(12,"td",23),t._uU(13),t.qZA(),t.TgZ(14,"td",23),t._uU(15),t.qZA()()),2&i){const n=l.$implicit;t.xp6(4),t.hij("",n.no,"."),t.xp6(3),t.Oqu(n.vegetable_name),t.xp6(2),t.Oqu(n.notes),t.xp6(2),t.Oqu(n.quantity),t.xp6(2),t.hij("",n.rate,"/-"),t.xp6(2),t.hij("",n.total_amount,"\xa0\xa0\xa0\xa0")}}function P(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2,"\xa0\xa0\xa0Last 2 Collections"),t.qZA(),t.TgZ(3,"td",25),t._uU(4,"Bill: \xa0\xa0\xa0"),t.qZA(),t.TgZ(5,"td",26),t._uU(6),t.qZA()()),2&i){const n=t.oxw().$implicit;t.xp6(6),t.hij("",n.bill_amount,"\xa0\xa0\xa0\xa0")}}function B(i,l){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const n=t.oxw(2).$implicit;t.xp6(1),t.AsE("\xa0\xa0\xa01. \xa0",n.collections[0].collection_date," - \xa0",t.xi3(2,2,n.collections[0].amount,"1.2-2"),"")}}function M(i,l){1&i&&t._UZ(0,"td")}function v(i,l){1&i&&t._UZ(0,"td")}function U(i,l){1&i&&t._UZ(0,"td")}function q(i,l){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,B,3,5,"td",27),t.YNc(2,M,1,0,"td",5),t.YNc(3,v,1,0,"td",5),t.YNc(4,U,1,0,"td",5),t.TgZ(5,"td",25),t._uU(6,"Balance: \xa0\xa0\xa0"),t.qZA(),t.TgZ(7,"td",26),t._uU(8),t.qZA(),t._UZ(9,"td"),t.qZA()),2&i){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.collections.length>=1),t.xp6(1),t.Q6J("ngIf",n.collections.length<1||0===n.collections.length),t.xp6(1),t.Q6J("ngIf",n.collections.length<1||0===n.collections.length),t.xp6(1),t.Q6J("ngIf",n.collections.length<1||0===n.collections.length),t.xp6(4),t.hij("",n.balance_amount,"\xa0\xa0\xa0\xa0")}}function J(i,l){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const n=t.oxw(2).$implicit;t.xp6(1),t.AsE("\xa0\xa0\xa02. \xa0",n.collections[1].collection_date," - \xa0",t.xi3(2,2,n.collections[1].amount,"1.2-2"),"")}}function w(i,l){1&i&&t._UZ(0,"td")}function I(i,l){1&i&&t._UZ(0,"td")}function O(i,l){1&i&&t._UZ(0,"td")}function Y(i,l){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,J,3,5,"td",27),t.YNc(2,w,1,0,"td",5),t.YNc(3,I,1,0,"td",5),t.YNc(4,O,1,0,"td",5),t.TgZ(5,"td",25),t._uU(6,"Total: \xa0\xa0\xa0"),t.qZA(),t.TgZ(7,"td",26),t._uU(8),t.qZA(),t._UZ(9,"td"),t.qZA()),2&i){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",2===n.collections.length),t.xp6(1),t.Q6J("ngIf",n.collections.length<2||0===n.collections.length),t.xp6(1),t.Q6J("ngIf",n.collections.length<2||0===n.collections.length),t.xp6(1),t.Q6J("ngIf",n.collections.length<2||0===n.collections.length),t.xp6(4),t.hij("",n.total_balance,"\xa0\xa0\xa0\xa0")}}function z(i,l){if(1&i&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&i){const n=t.oxw(2).$implicit;t.xp6(1),t.Oqu(n.continue)}}function D(i,l){if(1&i&&(t.TgZ(0,"tr")(1,"td",28),t.YNc(2,z,2,1,"span",29),t.qZA()()),2&i){const n=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",""!==n.continue)}}function N(i,l){if(1&i&&(t.TgZ(0,"div",11)(1,"table",12)(2,"tr")(3,"td",13)(4,"span",14),t._uU(5,"SRI SAINATH TRADERS Shop No: 12"),t.qZA(),t._uU(6," 9640443322,\xa09959928487"),t.qZA()(),t.TgZ(7,"tr")(8,"td"),t._uU(9,"\xa0\xa0\xa0"),t.TgZ(10,"span",15),t._uU(11),t.ALo(12,"uppercase"),t.qZA(),t._uU(13),t.qZA(),t._UZ(14,"td"),t.TgZ(15,"td",16)(16,"span"),t._uU(17),t.qZA(),t._uU(18),t.ALo(19,"date"),t.qZA()(),t.TgZ(20,"tr")(21,"td",17),t._UZ(22,"hr",18),t.qZA()()(),t.TgZ(23,"table",12),t.YNc(24,T,16,6,"tr",19),t.TgZ(25,"tr"),t._UZ(26,"td",20)(27,"td",20)(28,"td",20)(29,"td",20)(30,"td",20),t.qZA(),t.YNc(31,P,7,1,"tr",5),t.YNc(32,q,10,5,"tr",5),t.YNc(33,Y,10,5,"tr",5),t.YNc(34,D,3,1,"tr",5),t.qZA()()),2&i){const n=l.$implicit,e=t.oxw(2);t.xp6(11),t.Oqu(t.lcZ(12,9,n.name)),t.xp6(2),t.hij("\xa0- ",n.phone_number,""),t.xp6(4),t.Oqu(0===e.day?"Sun,":1===e.day?"Mon,":2===e.day?"Tue,":3===e.day?"Wed,":4===e.day?"Thu,":5===e.day?"Fri,":6===e.day?"Sat,":""),t.xp6(1),t.hij(" ",t.xi3(19,11,e.date,"dd-MM-yyyy"),"\xa0\xa0\xa0\xa0 "),t.xp6(6),t.Q6J("ngForOf",n.items),t.xp6(7),t.Q6J("ngIf",n.bill_amount),t.xp6(1),t.Q6J("ngIf",n.balance_amount<0||n.balance_amount>=0),t.xp6(1),t.Q6J("ngIf",n.total_balance),t.xp6(1),t.Q6J("ngIf",n.continue)}}function S(i,l){if(1&i&&(t.TgZ(0,"body")(1,"div",9),t.YNc(2,N,35,14,"div",10),t.qZA()()),2&i){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.finalArray)}}const Q=[{path:"",component:(()=>{class i{constructor(n){this.mainService=n,this.isVisible=!1,this.todayDate="",this.day=0,this.tablestring="",this.printData=[],this.collectionsData=[],this.date=new Date,this.maxCount=2,this.breakCount=10,this.finalArray=[],this.dateFormat="dd-MM-yyyy",this.dateDisable=!1}ngOnInit(){const n=new Date;this.day=this.date.getDay(),this.todayDate=m(n).format("DD-MM-YYYY"),this.userinfo=this.mainService.getLoggedInUser(),"admin"!==this.userinfo.username&&(this.dateDisable=!0),this.printCustomerBills()}showModal(){this.isVisible=!0}handleOk(){this.isVisible=!1}handleCancel(){this.isVisible=!1}print(){window.print()}getCollectionsByCustomerId(n){this.mainService.getCollectionsByCustomerId(n).subscribe(e=>{let a=[];e&&e.length>0&&(a.push(e[0]),a.push(e[1])),this.printData.forEach(o=>{o.cusomer_id===n&&(o.collections=a)})},e=>(console.log("get customers err ",e),e))}onReturnDesiredCount(n,e){for(let o of e);}returnSum(n){return n.reduce((e,a)=>a.total_amount+e,0)}maxRecordsCount(n){this.finalArray=[];let e=[];n.forEach((o,R)=>{if(o.records.forEach((d,u)=>{d.no=u+1}),o.records.length>this.breakCount+1){let d=o.records.slice(0,this.breakCount),u=o.records.slice(this.breakCount),c={...o};c.records=d,o.records.length>9&&(c.continue="Continue...");let _={...o};_.records=u,o.records.length>18&&(_.continue=""),_.total_amount=this.returnSum(_.records),c.total_amount=this.returnSum(c.records),e.push(c),e.push(_)}else o.total_amount=this.returnSum(o.records),e.push(o)}),e.some(o=>o.records.length>this.breakCount+1)?this.maxRecordsCount(e):(this.finalArray=e,this.mainService.spinning.emit(!1))}printCustomerBills(){this.day=this.date.getDay();const a={skip:0,limit:1e3,bill_date:m(this.date).format("DD-MM-YYYY")};this.mainService.spinning.emit(!0),this.mainService.printCustomerBills(a).subscribe(o=>{o&&o.length>0?(this.mainService.spinning.emit(!1),this.finalArray=o):(this.finalArray=[],this.mainService.spinning.emit(!1))},o=>{console.log("get customers err ",o),this.mainService.spinning.emit(!1)})}onChange(n){this.finalArray=[],this.printCustomerBills()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(A.J))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-bill-print"]],decls:9,vars:7,consts:[[1,"header-print"],[1,"date-picker"],[3,"ngModel","nzAllowClear","nzFormat","nzDisabled","ngModelChange"],["class","align-right margin-right25",3,"click",4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"align-right","margin-right25",3,"click"],["nz-icon","","nzType","printer","nzTheme","fill"],[1,"text-center"],[1,"container"],["class","bill",4,"ngFor","ngForOf"],[1,"bill"],[2,"width","100%"],["colspan","3",1,"text-center"],[1,"shop-title"],[1,"bill_customer_name"],[1,"bill_item_name",2,"text-align","right"],["colspan","3",2,"width","100%"],[2,"border","1px dashed #000"],[4,"ngFor","ngForOf"],[2,"height","5px"],[1,"upper-case"],[1,"bill_item_name"],[1,"number","bill_item_name"],["colspan","3",1,"bill_item_name"],[1,"bill_item_name","upper-case",2,"text-align","right"],[1,"number","bill_item_name",2,"border-top","1px dashed #000"],["colspan","3","class","bill_item_name",4,"ngIf"],["colspan","5",1,"text-center"],["class","bill_item_name","style","letter-spacing: 1px;",4,"ngIf"],[1,"bill_item_name",2,"letter-spacing","1px"]],template:function(n,e){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Bill Print"),t.qZA(),t.TgZ(2,"div",1),t._UZ(3,"br"),t.TgZ(4,"nz-date-picker",2),t.NdJ("ngModelChange",function(o){return e.date=o})("ngModelChange",function(o){return e.onChange(o)}),t.qZA(),t.YNc(5,y,2,0,"a",3),t._UZ(6,"br"),t.qZA(),t.YNc(7,b,2,0,"h3",4),t.YNc(8,S,3,1,"body",5)),2&n&&(t.xp6(4),t.Q6J("ngModel",e.date)("nzAllowClear",!1)("nzFormat",e.dateFormat)("nzDisabled",e.dateDisable),t.xp6(1),t.Q6J("ngIf",e.finalArray&&e.finalArray.length>0),t.xp6(2),t.Q6J("ngIf",e.finalArray&&0===e.finalArray.length),t.xp6(1),t.Q6J("ngIf",e.finalArray&&e.finalArray.length>0))},dependencies:[s.sg,s.O5,x.Ls,h.JJ,h.On,C.w,Z.uw,f.Uo,f.$Z,s.gd,s.JJ,s.uU],styles:[".shop-title[_ngcontent-%COMP%]{color:#000;font-weight:700;font-size:15px}.print-box-width[_ngcontent-%COMP%]{width:386px;height:365px}body[_ngcontent-%COMP%]{margin:0;padding:0}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,2fr);grid-gap:20px}.bill[_ngcontent-%COMP%]{width:396.85px;height:374.7px;padding:5px;box-sizing:border-box;page-break-inside:avoid}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;padding:0}.number[_ngcontent-%COMP%]{text-align:right!important}.upper-case[_ngcontent-%COMP%]{text-transform:uppercase}.date-picker[_ngcontent-%COMP%]{margin-bottom:10px}@page{size:A4;margin:5mm 5mm 5mm -8mm}@media print{body[_ngcontent-%COMP%]{width:0;height:0}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,2fr);margin:0;padding:0}.bill[_ngcontent-%COMP%]{width:396.85px;height:370.7px;box-sizing:border-box;page-break-inside:avoid}.header-print[_ngcontent-%COMP%], .date-picker[_ngcontent-%COMP%]{display:none}}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{text-align:center}.header-print[_ngcontent-%COMP%]{margin-top:10px}.bill_customer_name[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#000}.bill_item_name[_ngcontent-%COMP%]{font-weight:600;font-size:12px}.width_customs[_ngcontent-%COMP%]{width:50px}.align-right[_ngcontent-%COMP%]{float:right}.margin-right25[_ngcontent-%COMP%]{margin-right:25px}"]}),i})()}];let F=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.Bz.forChild(Q),g.Bz]}),i})();var k=r(4973);let $=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[s.ez,k.m,F]}),i})()}}]);